/*
 * tlcd_font.c
 *
 *  Created on: 19 maj 2019
 *      Author: Mariusz
 */
#include <string.h>
#include <stdlib.h>

#include "TLCD/tlcd_config.h"
#include "TLCD/Driver/tlcd.h"
#include "TLCD/Driver/tlcd_font.h"

_TLCD_PGM_U8_TYPE digitBitmaps[] = {

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,      // (sp) 	32
	0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x10,0x10,      // !		33
	0x24,0x24,0x24,0x24,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00,      // "		34
	0x24,0x24,0x24,0x7E,0x24,0x24,0x24,0x24,0x7E,0x24,0x24,0x24,      // #		35
	0x18,0x3C,0x1A,0x1A,0x1A,0x3C,0x58,0x58,0x58,0x5A,0x3C,0x18,      // $		36
	0x4E,0x4A,0x4E,0x40,0x20,0x10,0x08,0x04,0x02,0x72,0x52,0x72,      // %		37
	0x38,0x44,0x44,0x44,0x38,0x24,0x42,0x42,0x42,0x42,0x3C,0x60,      // &		38
	0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,      // '		39
	0x10,0x08,0x08,0x04,0x04,0x04,0x04,0x04,0x04,0x08,0x08,0x10,      // (		40
	0x08,0x10,0x10,0x20,0x20,0x20,0x20,0x20,0x20,0x10,0x10,0x08,      // )		41
	0x10,0x10,0x7C,0x10,0x28,0x44,0x00,0x00,0x00,0x00,0x00,0x00,      // *		42
	0x00,0x00,0x00,0x10,0x10,0x7C,0x10,0x10,0x00,0x00,0x00,0x00,      // +		43
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x20,0x20,      // ,		44
	0x00,0x00,0x00,0x00,0x00,0x7C,0x00,0x00,0x00,0x00,0x00,0x00,      // -		45
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,      // .		46
	0x20,0x20,0x20,0x30,0x10,0x10,0x08,0x08,0x0C,0x04,0x04,0x04,      // /		47


	0x3C,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x3C,      // 0		48
	0x10,0x18,0x14,0x12,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,      // 1		49
	0x3C,0x42,0x42,0x42,0x40,0x20,0x10,0x08,0x04,0x02,0x02,0x7E,      // 2		50
	0x3C,0x42,0x40,0x40,0x20,0x10,0x20,0x40,0x40,0x40,0x42,0x3C,      // 3		51
	0x02,0x02,0x02,0x02,0x12,0x12,0x12,0x7E,0x10,0x10,0x10,0x10,      // 4		52
	0x7E,0x02,0x02,0x02,0x02,0x3E,0x40,0x40,0x40,0x40,0x40,0x3E,      // 5		53
	0x3C,0x42,0x02,0x02,0x02,0x3E,0x42,0x42,0x42,0x42,0x42,0x3C,      // 6		54
	0x7E,0x40,0x60,0x20,0x30,0x10,0x18,0x08,0x0C,0x04,0x04,0x04,      // 7		55
	0x3C,0x42,0x42,0x42,0x42,0x3C,0x42,0x42,0x42,0x42,0x42,0x3C,      // 8		56
	0x3C,0x42,0x42,0x42,0x42,0x42,0x7C,0x40,0x40,0x40,0x42,0x3C,      // 9		57

	0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,      // :		58
	0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x10,      // ;		59
	0x00,0x00,0x20,0x10,0x08,0x04,0x04,0x08,0x10,0x20,0x00,0x00,      // <		60
	0x00,0x00,0x00,0x7C,0x00,0x00,0x00,0x7C,0x00,0x00,0x00,0x00,      // =		61
	0x00,0x00,0x04,0x08,0x10,0x20,0x20,0x10,0x08,0x04,0x00,0x00,      // >		62
	0x3C,0x42,0x42,0x42,0x40,0x20,0x10,0x08,0x08,0x00,0x00,0x08,      // ?		63
	0x3C,0x42,0x42,0x42,0x42,0x7A,0x4A,0x4A,0x4A,0x7A,0x02,0x3C,      // @		64

	0x18,0x18,0x18,0x18,0x24,0x24,0x24,0x24,0x7E,0x42,0x42,0x42,      // A		65
	0x3E,0x42,0x42,0x42,0x42,0x3E,0x42,0x42,0x42,0x42,0x42,0x3E,      // B		66
	0x3C,0x42,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x42,0x3C,      // C		67
	0x1E,0x22,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x22,0x1E,      // D		68
	0x7E,0x02,0x02,0x02,0x02,0x7E,0x02,0x02,0x02,0x02,0x02,0x7E,      // E		69
	0x7E,0x02,0x02,0x02,0x02,0x02,0x3E,0x02,0x02,0x02,0x02,0x02,      // F		70
	0x3C,0x42,0x02,0x02,0x02,0x02,0x72,0x42,0x42,0x42,0x42,0x3C,      // G		71
	0x42,0x42,0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x42,0x42,0x42,      // H		72
	0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,      // I		73
	0x3C,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x24,0x18,      // J		74
	0x42,0x42,0x22,0x12,0x0A,0x06,0x0A,0x12,0x22,0x42,0x42,0x42,      // K		75

	0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x7E,      // L		76
	0x42,0x66,0x5A,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,      // M		77
	0x42,0x46,0x46,0x4A,0x4A,0x52,0x52,0x62,0x62,0x42,0x42,0x42,      // N		78
	0x3C,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x3C,      // O		79
	0x3E,0x42,0x42,0x42,0x42,0x3E,0x02,0x02,0x02,0x02,0x02,0x02,      // P		80
	0x3C,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x3C,0x20,0x40,      // Q  	81
	0x3E,0x42,0x42,0x42,0x42,0x3E,0x06,0x0A,0x12,0x22,0x42,0x42,      // R		82
	0x3C,0x42,0x02,0x02,0x02,0x3C,0x40,0x40,0x40,0x40,0x42,0x3C,      // S		83
	0x7E,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,      // T		84
	0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x3C,      // U		85
	0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x24,0x24,0x24,0x18,0x18,      // V		86
	0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x5A,0x66,0x42,      // W		87

	0x42,0x42,0x42,0x24,0x24,0x18,0x18,0x24,0x24,0x42,0x42,0x42,      // X		88
	0x44,0x44,0x44,0x28,0x28,0x28,0x10,0x10,0x10,0x10,0x10,0x10,      // Y		89
	0x7E,0x40,0x20,0x20,0x10,0x10,0x08,0x08,0x04,0x04,0x02,0x7E,      // Z		90
	0x1C,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x1C,      // [		91
	0x04,0x04,0x04,0x08,0x08,0x08,0x10,0x10,0x10,0x20,0x20,0x20,      // (\)	92
	0x38,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x38,      // ]		93
	0x18,0x24,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,      // ^		94
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,      // _		95
	0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,      // '		96

	0x00,0x00,0x00,0x00,0x3C,0x40,0x40,0x7C,0x42,0x42,0x42,0x3C,      // a		97
	0x02,0x02,0x02,0x02,0x02,0x3E,0x42,0x42,0x42,0x42,0x42,0x3E,      // b		98
	0x00,0x00,0x00,0x00,0x7C,0x02,0x02,0x02,0x02,0x02,0x02,0x7C,      // c		99
	0x40,0x40,0x40,0x40,0x7C,0x42,0x42,0x42,0x42,0x42,0x42,0x7C,      // d		100
	0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x3E,0x02,0x02,0x3C,      // e		101
	0x30,0x08,0x08,0x08,0x08,0x08,0x3C,0x08,0x08,0x08,0x08,0x08,      // f		102
	0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x7C,0x40,0x40,0x3C,      // g		103
	0x02,0x02,0x02,0x02,0x02,0x3E,0x42,0x42,0x42,0x42,0x42,0x42,      // h		104
	0x00,0x00,0x00,0x00,0x10,0x00,0x10,0x10,0x10,0x10,0x10,0x10,      // i		105
	0x00,0x00,0x00,0x10,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x0C,      // j		106
	0x02,0x02,0x02,0x02,0x42,0x22,0x12,0x0A,0x0E,0x12,0x22,0x42,      // k		107

	0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x38,      // l		108
	0x00,0x00,0x00,0x00,0x2E,0x52,0x52,0x52,0x52,0x52,0x52,0x52,      // m		109
	0x00,0x00,0x00,0x00,0x3E,0x42,0x42,0x42,0x42,0x42,0x42,0x42,      // n		110
	0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x42,0x42,0x42,0x3C,      // o		111
	0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x42,0x3E,0x02,0x02,      // p		112
	0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x7C,0x40,0x40,0x40,      // q		113
	0x00,0x00,0x00,0x00,0x3E,0x42,0x42,0x02,0x02,0x02,0x02,0x02,      // r		114
	0x00,0x00,0x00,0x00,0x3C,0x42,0x02,0x3C,0x40,0x40,0x42,0x3C,      // s		115
	0x04,0x04,0x04,0x1E,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x18,      // t		116
	0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x7C,      // u		117
	0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x42,0x24,0x24,0x24,0x18,      // v		118
	0x00,0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x42,0x5A,0x66,0x42,      // w		119

	0x00,0x00,0x00,0x00,0x42,0x42,0x24,0x18,0x18,0x24,0x42,0x42,      // x		120
	0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x42,0x7C,0x40,0x40,0x3C,      // y		121
	0x00,0x00,0x00,0x00,0x7E,0x40,0x20,0x10,0x08,0x04,0x02,0x7E,      // z		122
	0x18,0x04,0x04,0x04,0x04,0x06,0x04,0x04,0x04,0x04,0x04,0x18,      // {		123
	0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,      // |		124
	0x18,0x20,0x20,0x20,0x20,0x60,0x20,0x20,0x20,0x20,0x20,0x18,      // }		125
	0x00,0x00,0x00,0x00,0x4C,0x32,0x00,0x00,0x00,0x00,0x00,0x00,      // ~		126

	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,      // blank	127

};

void tlcd_draw_counter( Counter_t * cnt, uint16_t color ){

	uint8_t digit;
	int16_t newX;
	uint8_t len;

	itoa( cnt->value, cnt->valueStr, 10 );
	len = strlen( cnt->valueStr );


	for( uint8_t i=0; i<cnt->digits; i++ ){

		if( cnt->alignment == 0 ) newX = cnt->x + i * 8;
		else newX = cnt->x - 8 - i * 8;

		if( i < len ){
			if( cnt->alignment == 0 ) digit = cnt->valueStr[i] - 32;
			else digit = cnt->valueStr[len - 1 - i] - 32;

			tlcd_draw_font_bitmap( newX, cnt->y, digitBitmaps, digit, color, 0x6EE9 );

		}else{

			tlcd_draw_font_bitmap( newX, cnt->y, digitBitmaps, 127 - 32, color, 0x6EE9 );

		}

	}
}


void tlcd_draw_text( int16_t x, int16_t y, char * text, uint16_t color, uint8_t alignemnt ){

	uint8_t digit;
	int16_t newX;
	uint8_t len = strlen( text );

	for( uint8_t i=0; i<len; i++ ){

		if( alignemnt == 0 ) newX = x + i * 8;
		else newX = x - 8 - i * 8;

		if( i < len ){
			if( alignemnt == 0 ) digit = text[i] - 32;
			else digit = text[len - 1 - i] - 32;

			tlcd_draw_font_bitmap( newX, y, digitBitmaps, digit, color, 0x8430 );

		}else{

			tlcd_draw_font_bitmap( newX, y, digitBitmaps, 127 - 32, color, 0x8430 );

		}

	}
}


